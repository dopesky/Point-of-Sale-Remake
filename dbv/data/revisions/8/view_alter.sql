ALTER VIEW `user_details`
 AS select `hci-pos`.`tbl_users`.`user_id` AS `user_id`,`hci-pos`.`tbl_users`.`email` AS `email`,`hci-pos`.`tbl_users`.`password` AS `password`,`hci-pos`.`tbl_users`.`biometrics_id` AS `biometrics_id`,`hci-pos`.`tbl_users`.`twofactor_auth` AS `twofactor_auth`,`hci-pos`.`tbl_users`.`twofactor_secret` AS `twofactor_secret`,`hci-pos`.`tbl_users`.`token` AS `token`,`hci-pos`.`tbl_users`.`token_expire` AS `token_expire`,`hci-pos`.`tbl_users`.`show_inactive` AS `show_inactive`,`hci-pos`.`tbl_users`.`show_deleted` AS `show_deleted`,`hci-pos`.`tbl_users`.`created_time` AS `created_time`,`hci-pos`.`tbl_users`.`last_access_time` AS `last_access_time`,`hci-pos`.`tbl_users`.`suspended` AS `suspended`,`hci-pos`.`owner`.`owner_id` AS `id_owner`,`hci-pos`.`owner`.`first_name` AS `owner_fname`,`hci-pos`.`owner`.`last_name` AS `owner_lname`,concat_ws(' ',`hci-pos`.`owner`.`last_name`,`hci-pos`.`owner`.`first_name`) AS `owner_full_name`,`hci-pos`.`owner`.`company` AS `company`,`hci-pos`.`owner`.`profile_photo` AS `owner_photo`,`hci-pos`.`owner`.`active` AS `owner_active`,`hci-pos`.`employees`.`employee_id` AS `employee_id`,`hci-pos`.`employees`.`first_name` AS `first_name`,`hci-pos`.`employees`.`last_name` AS `last_name`,concat_ws(' ',`hci-pos`.`employees`.`last_name`,`hci-pos`.`employees`.`first_name`) AS `full_name`,`hci-pos`.`employees`.`owner_id` AS `owner_id`,`hci-pos`.`employees`.`profile_photo` AS `profile_photo`,`hci-pos`.`employees`.`active` AS `active`,`hci-pos`.`employees`.`suspended` AS `employee_suspended`,`hci-pos`.`departments`.`department` AS `department`,`hci-pos`.`employees`.`department_id` AS `department_id`,(case when ((`hci-pos`.`tbl_users`.`suspended` = 1) and isnull(`hci-pos`.`tbl_users`.`password`)) then 'Awaiting Verification' when ((`hci-pos`.`tbl_users`.`suspended` = 1) and (`hci-pos`.`tbl_users`.`password` is not null)) then 'Account Suspended by Admin' when (`hci-pos`.`owner`.`active` = 1) then 'Owner Active' when (`hci-pos`.`owner`.`active` = 0) then 'Account Suspended by Owner' when (`hci-pos`.`employees`.`suspended` = 1) then 'Account Suspended by Owner' when ((`hci-pos`.`employees`.`active` = 1) and (`hci-pos`.`employees`.`suspended` = 0)) then 'Employee Active' when ((`hci-pos`.`employees`.`active` = 0) and (`hci-pos`.`employees`.`suspended` = 0)) then 'Account Suspended by Employee' else 'Incomplete Registration' end) AS `status` from (((`hci-pos`.`tbl_users` left join `hci-pos`.`owner` on((`hci-pos`.`tbl_users`.`user_id` = `hci-pos`.`owner`.`user_id`))) left join `hci-pos`.`employees` on((`hci-pos`.`employees`.`user_id` = `hci-pos`.`tbl_users`.`user_id`))) left join `hci-pos`.`departments` on((`hci-pos`.`departments`.`department_id` = `hci-pos`.`employees`.`department_id`)))